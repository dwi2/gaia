!function(t){"use strict";function e(t){if(!t)return!0;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function i(){return"goku-"+a++}function n(t){if(!t)throw new Error("Goku: no argument");if("string"==typeof t&&(t=document.querySelector(t)),r[t.dataset.gokuId])return r[t.dataset.gokuId];var n=i();return t.dataset.gokuId=n,r[n]=new Transition(t,{id:n,onstart:function(){o||(o=u(s))},oncomplete:function(t){var i=t.dataset.gokuId;delete t.dataset.gokuId,delete r[i],e(r)&&(l(o),o=null)}}),r[n]}function s(t){for(var e in r)r[e].step&&r[e].step(t);o=u(s)}var o,r={},a=0,u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},l=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){window.clearTimeout(t)};t.goku=n}(window),function(t){"use strict";function e(t,e){e=e||{},this.element=t,this.id=e.id,this.onstart=e.onstart,this.oncomplete=e.oncomplete,this.queue=[],this.timings=[],this.playingIndex=-1,this.elapsedTime=0,this.lastTimestamp=0,this.isPaused=!1,this.requestId=null,this.promise=null,this.promiseQueue=[]}var i=400,n="ease";e.prototype={_generateTransform:function(t,e){var i=getComputedStyle(t).transform;t.style.transform="none"===i?e:i+" "+e},_generateTransformByMatrix:function(){},addClass:function(){},animate:function(){var t=Array.prototype.slice.call(arguments);if(!t[0])throw new Error("Goku: missing arguments!");if("string"==typeof t[0])throw new Error("Goku: implement this!");if("object"==typeof t[0]){var e=t[0],s=t[1]||{},o=[];for(var r in e)o.push(r);var a=o.join(" "),u=s.duration||i;this.timings.push(u);var l=this,h={options:s,start:function(){l.element.style.transitionProperty=a,l.element.style.transitionDuration=u+"ms",l.element.style.transitionTimingFunction=s.easing||n,l.element.offsetWidth;for(var t in e)l.element.style[t]="transform"===t?e[t]:e[t];s.start&&s.start()}};this.queue.push(h),1===this.queue.length&&l.onstart();var m={},d=new Promise(function(t,e){m.resolve=t,m.reject=e});return d.animate=this.animate.bind(this),d.delay=this.delay.bind(this),d.pause=this.pause.bind(this),m.promise=d,this.promiseQueue.push(m),d}},delay:function(t){if(!(t>0))throw new Error("Goku: missing arguments!");return this.queue.push(function(){}),this.timings.push(t),this},pause:function(){return console.log("pause"),this.isPaused=!0,this},reset:function(){},next:function(){},end:function(){return this},step:function(t){if(!this.isPaused&&this.lastTimestamp&&(this.elapsedTime+=t-this.lastTimestamp),this.lastTimestamp=t,-1===this.playingIndex)return void this._next();if(this.isPaused||console.log("step",this.id,this.elapsedTime),this.elapsedTime>this.timings[this.playingIndex]){var e=this.queue[this.playingIndex];e.options.complete&&e.options.complete();var i=this.promiseQueue[this.playingIndex];i.resolve(),this._next()}},_next:function(){if(this.playingIndex+=1,this.queue[this.playingIndex]){console.log("next");var t=this.queue[this.playingIndex];t.start(),this.elapsedTime=0,this.lastTimestamp=0}else console.log("end"),this._clear(),this.oncomplete(this.element)},_clear:function(){console.log("clear"),this.playingIndex=-1,this.queue.length=0,this.timings.length=0,this.elapsedTime=0,this.lastTimestamp=0,this.requestId=null}},t.Transition=e}(window);
//# sourceMappingURL=maps/goku.min.js.map